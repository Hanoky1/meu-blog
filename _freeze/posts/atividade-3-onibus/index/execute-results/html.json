{
  "hash": "c0ab87c5d65542341cdd6aa529b69628",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Análise de linhas e paradas - SPTrans\"\ndate: \"2025-11-23\"\ncategories: [Notícias, Programadores, Analistas, Transporte]\nimage: \"onibus.jpg\"\nformat: \n  html:\n    code-fold: false\n    code-tools: true\n---\n\n## Introdução\n\nEste documento apresenta uma análise das linhas de ônibus da SPTrans na região da Lapa, utilizando a API Olho Vivo. O código busca informações sobre linhas, paradas e posições dos veículos, gerando visualizações interativas em mapa.\n\n## Configuração e Autenticação\n\nPrimeiro, realizamos a autenticação na API SPTrans e buscamos as linhas disponíveis na região da Lapa.\n\n::: {#486c60e7 .cell execution_count=1}\n``` {.python .cell-code}\nimport os\nimport requests\nimport json\nfrom dotenv import load_dotenv\nfrom folium import Map, Marker\n\n# Carrega variáveis de ambiente\nload_dotenv(\".env\")\n\n# Inicia sessão e autentica na API\ns = requests.Session()\nres = s.post(\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={os.getenv('SPTRANS_TOKEN')}\"\n)\nprint(f\"Status da autenticação: {res.text}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nStatus da autenticação: true\n```\n:::\n:::\n\n\n## Busca de Linhas na Lapa\n\nAgora buscamos todas as linhas que passam pela região da Lapa.\n\n::: {#0640299b .cell execution_count=2}\n``` {.python .cell-code}\n# Busca linhas na região da Lapa\nlinhas_lapa = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Linha/Buscar?termosBusca=Lapa\"\n)\nlinhas_lapa = linhas_lapa.json()\n\n# Exibe as 3 primeiras linhas\nprint(f\"Total de linhas encontradas: {len(linhas_lapa)}\")\nprint(\"\\nPrimeiras 3 linhas:\")\nfor linha in linhas_lapa[:3]:\n    print(f\"- {linha}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de linhas encontradas: 152\n\nPrimeiras 3 linhas:\n- {'cl': 841, 'lc': False, 'lt': '118Y', 'sl': 1, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 33609, 'lc': False, 'lt': '118Y', 'sl': 2, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 2273, 'lc': False, 'lt': '119L', 'sl': 1, 'tl': 10, 'tp': 'TERM. LAPA', 'ts': 'VL. SULINA'}\n```\n:::\n:::\n\n\n## Mapeamento de Paradas\n\nBuscamos as paradas da linha 2506 e criamos um mapa interativo com todas as paradas.\n\n::: {#fdad18d7 .cell execution_count=3}\n``` {.python .cell-code}\n# Busca paradas da linha 2506\nres = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Parada/BuscarParadasPorLinha?codigoLinha=2506\"\n)\nparadas = res.json()\n\nprint(f\"Total de paradas encontradas: {len(paradas)}\")\nprint(\"\\nPrimeiras 3 paradas:\")\nfor parada in paradas[:3]:\n    print(f\"- {parada}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de paradas encontradas: 15\n\nPrimeiras 3 paradas:\n- {'cp': 7014417, 'np': 'ANGELICA B/C', 'ed': 'AV   ANGELICA', 'py': -23.534564, 'px': -46.654302}\n- {'cp': 60016784, 'np': 'PARADA PALMEIRAS B/C', 'ed': 'R PADRE ANTONIO TOMAS/ AV POMPEIA', 'py': -23.525799, 'px': -46.679251}\n- {'cp': 60016786, 'np': 'ANTARTICA B/C', 'ed': 'PC SOUSA ARANHA/ VDTO ANTARTICA', 'py': -23.526523, 'px': -46.673588}\n```\n:::\n:::\n\n\n## Visualização das Paradas no Mapa\n\nCriamos um mapa interativo com todas as paradas da linha.\n\n::: {#a4180810 .cell execution_count=4}\n``` {.python .cell-code}\n# Cria mapa centrado na primeira parada\nm = Map(location=[paradas[3][\"py\"], paradas[3][\"px\"]], zoom_start=14)\n\n# Adiciona marcador para cada parada\nfor i in paradas:\n    Marker(location=[i[\"py\"], i[\"px\"]], popup=i[\"np\"]).add_to(m)\n\n# Salva o mapa\nm.save(\"2506.html\")\nprint(\"Mapa salvo como '2506.html'\")\n\n# Exibe o mapa\nm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMapa salvo como '2506.html'\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_603c44001ec8a99c48acbd630d04054e {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_603c44001ec8a99c48acbd630d04054e&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_603c44001ec8a99c48acbd630d04054e = L.map(\n                &quot;map_603c44001ec8a99c48acbd630d04054e&quot;,\n                {\n                    center: [-23.528131, -46.670652],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 14,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_6968587ac3e6a8e90d5355ce8fe29e70 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_6968587ac3e6a8e90d5355ce8fe29e70.addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n            var marker_5f00b4cf8c3aa9eab0eefa469ca0e1c9 = L.marker(\n                [-23.534564, -46.654302],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_629ebe9f32b8e527d97e4609882a7cce = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_5d3c7da3eebd6b3f3794a93ce2055a82 = $(`&lt;div id=&quot;html_5d3c7da3eebd6b3f3794a93ce2055a82&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANGELICA B/C&lt;/div&gt;`)[0];\n                popup_629ebe9f32b8e527d97e4609882a7cce.setContent(html_5d3c7da3eebd6b3f3794a93ce2055a82);\n            \n        \n\n        marker_5f00b4cf8c3aa9eab0eefa469ca0e1c9.bindPopup(popup_629ebe9f32b8e527d97e4609882a7cce)\n        ;\n\n        \n    \n    \n            var marker_f375b65d97e35d3f6493703b797bd96a = L.marker(\n                [-23.525799, -46.679251],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_ff43cd05c0e036cf9f2611766cdfcb9b = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_16b4845b8f3320acdf9de725551e992a = $(`&lt;div id=&quot;html_16b4845b8f3320acdf9de725551e992a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PARADA PALMEIRAS B/C&lt;/div&gt;`)[0];\n                popup_ff43cd05c0e036cf9f2611766cdfcb9b.setContent(html_16b4845b8f3320acdf9de725551e992a);\n            \n        \n\n        marker_f375b65d97e35d3f6493703b797bd96a.bindPopup(popup_ff43cd05c0e036cf9f2611766cdfcb9b)\n        ;\n\n        \n    \n    \n            var marker_000eb62b04ce7ecfe1a4b4ddbf8cb984 = L.marker(\n                [-23.526523, -46.673588],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_5ab927e8d78d030bd2160a3bf6b05787 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_b6076ae46dfc2b6c3f95a9c86bb0434b = $(`&lt;div id=&quot;html_b6076ae46dfc2b6c3f95a9c86bb0434b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANTARTICA B/C&lt;/div&gt;`)[0];\n                popup_5ab927e8d78d030bd2160a3bf6b05787.setContent(html_b6076ae46dfc2b6c3f95a9c86bb0434b);\n            \n        \n\n        marker_000eb62b04ce7ecfe1a4b4ddbf8cb984.bindPopup(popup_5ab927e8d78d030bd2160a3bf6b05787)\n        ;\n\n        \n    \n    \n            var marker_c5d631fafab32d4d500fdbd47d4ed29d = L.marker(\n                [-23.528131, -46.670652],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_9a9b09f5c085b9937fd8bf9b47e2e1c7 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_9b588bd065dc739f54451d291ddcd914 = $(`&lt;div id=&quot;html_9b588bd065dc739f54451d291ddcd914&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;BABY BARIONY B/C&lt;/div&gt;`)[0];\n                popup_9a9b09f5c085b9937fd8bf9b47e2e1c7.setContent(html_9b588bd065dc739f54451d291ddcd914);\n            \n        \n\n        marker_c5d631fafab32d4d500fdbd47d4ed29d.bindPopup(popup_9a9b09f5c085b9937fd8bf9b47e2e1c7)\n        ;\n\n        \n    \n    \n            var marker_c5895c8038e3e3500144e8bd256f94ab = L.marker(\n                [-23.53021, -46.6669],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_89aacea92ef8dcee224093bd9e0b0fe2 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_95790d79ff4615d7b53d05f5c1701eca = $(`&lt;div id=&quot;html_95790d79ff4615d7b53d05f5c1701eca&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PQ. DA ÁGUA BRANCA B/C&lt;/div&gt;`)[0];\n                popup_89aacea92ef8dcee224093bd9e0b0fe2.setContent(html_95790d79ff4615d7b53d05f5c1701eca);\n            \n        \n\n        marker_c5895c8038e3e3500144e8bd256f94ab.bindPopup(popup_89aacea92ef8dcee224093bd9e0b0fe2)\n        ;\n\n        \n    \n    \n            var marker_1b1889b9a52b2a517162c021700ec0e7 = L.marker(\n                [-23.52494, -46.698995],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_85ccf9138e9d650fa53f63540582bb40 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_3c5e38e9e57a7e982affa64cc43b9f62 = $(`&lt;div id=&quot;html_3c5e38e9e57a7e982affa64cc43b9f62&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SCIPIAO B/C&lt;/div&gt;`)[0];\n                popup_85ccf9138e9d650fa53f63540582bb40.setContent(html_3c5e38e9e57a7e982affa64cc43b9f62);\n            \n        \n\n        marker_1b1889b9a52b2a517162c021700ec0e7.bindPopup(popup_85ccf9138e9d650fa53f63540582bb40)\n        ;\n\n        \n    \n    \n            var marker_5cdd8cbab58ce6a45f813b544429f412 = L.marker(\n                [-23.524994, -46.695297],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_b79fed15c8ad6e6b1aa2a5313fc5dcf3 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_7b5de75cfc54c280f70183b9d42350e8 = $(`&lt;div id=&quot;html_7b5de75cfc54c280f70183b9d42350e8&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VESPASIANO B/C&lt;/div&gt;`)[0];\n                popup_b79fed15c8ad6e6b1aa2a5313fc5dcf3.setContent(html_7b5de75cfc54c280f70183b9d42350e8);\n            \n        \n\n        marker_5cdd8cbab58ce6a45f813b544429f412.bindPopup(popup_b79fed15c8ad6e6b1aa2a5313fc5dcf3)\n        ;\n\n        \n    \n    \n            var marker_937c4124b2a458c10ba920d934ff3abf = L.marker(\n                [-23.525029, -46.690074],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_8848631afccb539a6f6672cbd30b7107 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_fbd046c2594b107ed529bdda6dc81b3b = $(`&lt;div id=&quot;html_fbd046c2594b107ed529bdda6dc81b3b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CORNELIA&lt;/div&gt;`)[0];\n                popup_8848631afccb539a6f6672cbd30b7107.setContent(html_fbd046c2594b107ed529bdda6dc81b3b);\n            \n        \n\n        marker_937c4124b2a458c10ba920d934ff3abf.bindPopup(popup_8848631afccb539a6f6672cbd30b7107)\n        ;\n\n        \n    \n    \n            var marker_0b175b39079fda3c9dfaed55a08fe946 = L.marker(\n                [-23.523407, -46.700541],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_b7d949b3c6ad8d8d2c981cdde3abac30 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_aad06ab8aac073739590f5c502a31858 = $(`&lt;div id=&quot;html_aad06ab8aac073739590f5c502a31858&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CATAO B/C&lt;/div&gt;`)[0];\n                popup_b7d949b3c6ad8d8d2c981cdde3abac30.setContent(html_aad06ab8aac073739590f5c502a31858);\n            \n        \n\n        marker_0b175b39079fda3c9dfaed55a08fe946.bindPopup(popup_b7d949b3c6ad8d8d2c981cdde3abac30)\n        ;\n\n        \n    \n    \n            var marker_1855fbcc9e12bd16d347eeb65b502642 = L.marker(\n                [-23.52517, -46.683408],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_581e3d86395319d9a49ba1f82d0e7e84 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_e113aa584bb73914f19406edf504d142 = $(`&lt;div id=&quot;html_e113aa584bb73914f19406edf504d142&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SESC POMPEIA B/C&lt;/div&gt;`)[0];\n                popup_581e3d86395319d9a49ba1f82d0e7e84.setContent(html_e113aa584bb73914f19406edf504d142);\n            \n        \n\n        marker_1855fbcc9e12bd16d347eeb65b502642.bindPopup(popup_581e3d86395319d9a49ba1f82d0e7e84)\n        ;\n\n        \n    \n    \n            var marker_dc524292bfb25d7623ed93148e374f71 = L.marker(\n                [-23.540545, -46.643624],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_bf17c8141a3b0021237301b6541f1d88 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_2918a513707c7591d0678d86cc8e2c3d = $(`&lt;div id=&quot;html_2918a513707c7591d0678d86cc8e2c3d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VITORIA B/C&lt;/div&gt;`)[0];\n                popup_bf17c8141a3b0021237301b6541f1d88.setContent(html_2918a513707c7591d0678d86cc8e2c3d);\n            \n        \n\n        marker_dc524292bfb25d7623ed93148e374f71.bindPopup(popup_bf17c8141a3b0021237301b6541f1d88)\n        ;\n\n        \n    \n    \n            var marker_0327ab04b8ec95d7f0b1aa85b7b76c0e = L.marker(\n                [-23.532847, -46.657404],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_102e7924dcca56ce173ae335cb0a66e8 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_28d1154010ab9da5eef2ff672c762af3 = $(`&lt;div id=&quot;html_28d1154010ab9da5eef2ff672c762af3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ROSA E SILVA C/B&lt;/div&gt;`)[0];\n                popup_102e7924dcca56ce173ae335cb0a66e8.setContent(html_28d1154010ab9da5eef2ff672c762af3);\n            \n        \n\n        marker_0327ab04b8ec95d7f0b1aa85b7b76c0e.bindPopup(popup_102e7924dcca56ce173ae335cb0a66e8)\n        ;\n\n        \n    \n    \n            var marker_e9c8e3b635a4018a98a63b19d1b3a51b = L.marker(\n                [-23.538708, -46.646888],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_9f8ffc227d10174d10540c32b0a4c08c = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_f46f5b099380dbc47e14534a41623105 = $(`&lt;div id=&quot;html_f46f5b099380dbc47e14534a41623105&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANA CINTRA B/C&lt;/div&gt;`)[0];\n                popup_9f8ffc227d10174d10540c32b0a4c08c.setContent(html_f46f5b099380dbc47e14534a41623105);\n            \n        \n\n        marker_e9c8e3b635a4018a98a63b19d1b3a51b.bindPopup(popup_9f8ffc227d10174d10540c32b0a4c08c)\n        ;\n\n        \n    \n    \n            var marker_24a20541a78ca184b2bbe7f63150febd = L.marker(\n                [-23.532068, -46.660957],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_6ea9528b53c3aee11d6d52548c32256a = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_fda419b51f5be540451659d68fab351c = $(`&lt;div id=&quot;html_fda419b51f5be540451659d68fab351c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PACAEMBU B/C&lt;/div&gt;`)[0];\n                popup_6ea9528b53c3aee11d6d52548c32256a.setContent(html_fda419b51f5be540451659d68fab351c);\n            \n        \n\n        marker_24a20541a78ca184b2bbe7f63150febd.bindPopup(popup_6ea9528b53c3aee11d6d52548c32256a)\n        ;\n\n        \n    \n    \n            var marker_e146dbb6cfb4875782dd9ea97c43c151 = L.marker(\n                [-23.536318, -46.651201],\n                {\n}\n            ).addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n    \n        var popup_85f2c5c48134663e3f5634d185cbe7ad = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_9503f9627254f02c9ff5ab2f0994959e = $(`&lt;div id=&quot;html_9503f9627254f02c9ff5ab2f0994959e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;NOTHMANN C/B&lt;/div&gt;`)[0];\n                popup_85f2c5c48134663e3f5634d185cbe7ad.setContent(html_9503f9627254f02c9ff5ab2f0994959e);\n            \n        \n\n        marker_e146dbb6cfb4875782dd9ea97c43c151.bindPopup(popup_85f2c5c48134663e3f5634d185cbe7ad)\n        ;\n\n        \n    \n    \n            tile_layer_6968587ac3e6a8e90d5355ce8fe29e70.addTo(map_603c44001ec8a99c48acbd630d04054e);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n## Posição em Tempo Real dos Veículos\n\nConsultamos a posição atual dos veículos da linha.\n\n::: {#2a1fbba4 .cell execution_count=5}\n``` {.python .cell-code}\n# Busca posição dos veículos\npos = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1//Posicao/Linha?codigoLinha=2506\"\n)\nposicoes = pos.json()\n\nprint(f\"Dados de posição: {posicoes}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDados de posição: {'hr': '10:18', 'vs': [{'p': '12615', 'a': True, 'ta': '2025-11-25T13:17:34Z', 'py': -23.520449499999998, 'px': -46.6996115, 'sv': None, 'is': None}, {'p': '12782', 'a': True, 'ta': '2025-11-25T13:17:14Z', 'py': -23.53482675, 'px': -46.653853, 'sv': None, 'is': None}]}\n```\n:::\n:::\n\n\n## Conclusão\n\nEste documento demonstra como utilizar a API Olho Vivo da SPTrans para obter informações sobre transporte público em São Paulo, incluindo linhas, paradas e posicionamento em tempo real dos veículos.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}