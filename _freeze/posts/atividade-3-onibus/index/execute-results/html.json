{
  "hash": "955aa2ef6df0bb2d1ab7b8074d30592c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Análise de linhas e paradas - SPTrans\"\nauthor: \"Edson\"\ndate: \"2025-11-23\"\ncategories: [Notícias, Programadores, Analistas, Transporte]\nimage: \"onibus.jpg\"\nformat: \n  html:\n    code-fold: false\n    code-tools: true\n---\n\n## Introdução\n\nEste documento apresenta uma análise das linhas de ônibus da SPTrans na região da Lapa, utilizando a API Olho Vivo. O código busca informações sobre linhas, paradas e posições dos veículos, gerando visualizações interativas em mapa.\n\n## Configuração e Autenticação\n\nPrimeiro, realizamos a autenticação na API SPTrans e buscamos as linhas disponíveis na região da Lapa.\n\n::: {#9acca51e .cell execution_count=1}\n``` {.python .cell-code}\nimport os\nimport requests\nimport json\nfrom dotenv import load_dotenv\nfrom folium import Map, Marker\n\n# Carrega variáveis de ambiente\nload_dotenv(\".env\")\n\n# Inicia sessão e autentica na API\ns = requests.Session()\nres = s.post(\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={os.getenv('SPTRANS_TOKEN')}\"\n)\nprint(f\"Status da autenticação: {res.text}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nStatus da autenticação: true\n```\n:::\n:::\n\n\n## Busca de Linhas na Lapa\n\nAgora buscamos todas as linhas que passam pela região da Lapa.\n\n::: {#34080186 .cell execution_count=2}\n``` {.python .cell-code}\n# Busca linhas na região da Lapa\nlinhas_lapa = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Linha/Buscar?termosBusca=Lapa\"\n)\nlinhas_lapa = linhas_lapa.json()\n\n# Exibe as 3 primeiras linhas\nprint(f\"Total de linhas encontradas: {len(linhas_lapa)}\")\nprint(\"\\nPrimeiras 3 linhas:\")\nfor linha in linhas_lapa[:3]:\n    print(f\"- {linha}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de linhas encontradas: 152\n\nPrimeiras 3 linhas:\n- {'cl': 841, 'lc': False, 'lt': '118Y', 'sl': 1, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 33609, 'lc': False, 'lt': '118Y', 'sl': 2, 'tl': 10, 'tp': 'LAPA', 'ts': 'LAUZANE PAULISTA'}\n- {'cl': 2273, 'lc': False, 'lt': '119L', 'sl': 1, 'tl': 10, 'tp': 'TERM. LAPA', 'ts': 'VL. SULINA'}\n```\n:::\n:::\n\n\n## Mapeamento de Paradas\n\nBuscamos as paradas da linha 2506 e criamos um mapa interativo com todas as paradas.\n\n::: {#aca76e8a .cell execution_count=3}\n``` {.python .cell-code}\n# Busca paradas da linha 2506\nres = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1/Parada/BuscarParadasPorLinha?codigoLinha=2506\"\n)\nparadas = res.json()\n\nprint(f\"Total de paradas encontradas: {len(paradas)}\")\nprint(\"\\nPrimeiras 3 paradas:\")\nfor parada in paradas[:3]:\n    print(f\"- {parada}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal de paradas encontradas: 15\n\nPrimeiras 3 paradas:\n- {'cp': 7014417, 'np': 'ANGELICA B/C', 'ed': 'AV   ANGELICA', 'py': -23.534564, 'px': -46.654302}\n- {'cp': 60016784, 'np': 'PARADA PALMEIRAS B/C', 'ed': 'R PADRE ANTONIO TOMAS/ AV POMPEIA', 'py': -23.525799, 'px': -46.679251}\n- {'cp': 60016786, 'np': 'ANTARTICA B/C', 'ed': 'PC SOUSA ARANHA/ VDTO ANTARTICA', 'py': -23.526523, 'px': -46.673588}\n```\n:::\n:::\n\n\n## Visualização das Paradas no Mapa\n\nCriamos um mapa interativo com todas as paradas da linha.\n\n::: {#772dc704 .cell execution_count=4}\n``` {.python .cell-code}\n# Cria mapa centrado na primeira parada\nm = Map(location=[paradas[3][\"py\"], paradas[3][\"px\"]], zoom_start=14)\n\n# Adiciona marcador para cada parada\nfor i in paradas:\n    Marker(location=[i[\"py\"], i[\"px\"]], popup=i[\"np\"]).add_to(m)\n\n# Salva o mapa\nm.save(\"2506.html\")\nprint(\"Mapa salvo como '2506.html'\")\n\n# Exibe o mapa\nm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMapa salvo como '2506.html'\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_f90e4fcf446411cf912dc95437df87c6 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_f90e4fcf446411cf912dc95437df87c6&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_f90e4fcf446411cf912dc95437df87c6 = L.map(\n                &quot;map_f90e4fcf446411cf912dc95437df87c6&quot;,\n                {\n                    center: [-23.528131, -46.670652],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 14,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_59431c97ff3c88196052d1e99203c95a = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_59431c97ff3c88196052d1e99203c95a.addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n            var marker_8eb449f5f0902e8698d94f6df7ab8c4d = L.marker(\n                [-23.534564, -46.654302],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_3aa4bc024e4870fe9d27ec72d3af96ea = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_d730f387dfdb1ddb3a142058e2fb4066 = $(`&lt;div id=&quot;html_d730f387dfdb1ddb3a142058e2fb4066&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANGELICA B/C&lt;/div&gt;`)[0];\n                popup_3aa4bc024e4870fe9d27ec72d3af96ea.setContent(html_d730f387dfdb1ddb3a142058e2fb4066);\n            \n        \n\n        marker_8eb449f5f0902e8698d94f6df7ab8c4d.bindPopup(popup_3aa4bc024e4870fe9d27ec72d3af96ea)\n        ;\n\n        \n    \n    \n            var marker_7d503047f5fe92fd02a45569c62a23c1 = L.marker(\n                [-23.525799, -46.679251],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_4fea923a5ac1e1a763cffa15f92d9a25 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_06961d0b2c9034c4b456cce301d12377 = $(`&lt;div id=&quot;html_06961d0b2c9034c4b456cce301d12377&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PARADA PALMEIRAS B/C&lt;/div&gt;`)[0];\n                popup_4fea923a5ac1e1a763cffa15f92d9a25.setContent(html_06961d0b2c9034c4b456cce301d12377);\n            \n        \n\n        marker_7d503047f5fe92fd02a45569c62a23c1.bindPopup(popup_4fea923a5ac1e1a763cffa15f92d9a25)\n        ;\n\n        \n    \n    \n            var marker_ff03b7bd51b08a29541aa3ec575cd076 = L.marker(\n                [-23.526523, -46.673588],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_353bcddcc5b42c02602a6bbbea95b49c = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_ad66499e05492215bfd61f8aebc96466 = $(`&lt;div id=&quot;html_ad66499e05492215bfd61f8aebc96466&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANTARTICA B/C&lt;/div&gt;`)[0];\n                popup_353bcddcc5b42c02602a6bbbea95b49c.setContent(html_ad66499e05492215bfd61f8aebc96466);\n            \n        \n\n        marker_ff03b7bd51b08a29541aa3ec575cd076.bindPopup(popup_353bcddcc5b42c02602a6bbbea95b49c)\n        ;\n\n        \n    \n    \n            var marker_12bc54b3f47da7d7c9dd622f00f22590 = L.marker(\n                [-23.528131, -46.670652],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_7be0607c2e02f24db8a99c5ee8912be9 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_c622d0a9fd4d9ddaacd22575c228aaec = $(`&lt;div id=&quot;html_c622d0a9fd4d9ddaacd22575c228aaec&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;BABY BARIONY B/C&lt;/div&gt;`)[0];\n                popup_7be0607c2e02f24db8a99c5ee8912be9.setContent(html_c622d0a9fd4d9ddaacd22575c228aaec);\n            \n        \n\n        marker_12bc54b3f47da7d7c9dd622f00f22590.bindPopup(popup_7be0607c2e02f24db8a99c5ee8912be9)\n        ;\n\n        \n    \n    \n            var marker_687c8040b0ca61d67721cfd5c5796726 = L.marker(\n                [-23.53021, -46.6669],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_3439f4b5be708ef0ba295cb3cb49fbc2 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_e42fe6e8af031b8d46c021c6847295df = $(`&lt;div id=&quot;html_e42fe6e8af031b8d46c021c6847295df&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PQ. DA ÁGUA BRANCA B/C&lt;/div&gt;`)[0];\n                popup_3439f4b5be708ef0ba295cb3cb49fbc2.setContent(html_e42fe6e8af031b8d46c021c6847295df);\n            \n        \n\n        marker_687c8040b0ca61d67721cfd5c5796726.bindPopup(popup_3439f4b5be708ef0ba295cb3cb49fbc2)\n        ;\n\n        \n    \n    \n            var marker_7ac1bb10bab30355dd4c3dc98a648eec = L.marker(\n                [-23.52494, -46.698995],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_48f087d6d23e940b736b01efb8b6ded3 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_e779ea33ec3637e81459180ebec34cd9 = $(`&lt;div id=&quot;html_e779ea33ec3637e81459180ebec34cd9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SCIPIAO B/C&lt;/div&gt;`)[0];\n                popup_48f087d6d23e940b736b01efb8b6ded3.setContent(html_e779ea33ec3637e81459180ebec34cd9);\n            \n        \n\n        marker_7ac1bb10bab30355dd4c3dc98a648eec.bindPopup(popup_48f087d6d23e940b736b01efb8b6ded3)\n        ;\n\n        \n    \n    \n            var marker_fde3f6800b21204caea45acad2e9655f = L.marker(\n                [-23.524994, -46.695297],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_1e28739aa8a0f36a2151799e4f210e14 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_a41384b7b4990f899e6cef1b58beec22 = $(`&lt;div id=&quot;html_a41384b7b4990f899e6cef1b58beec22&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VESPASIANO B/C&lt;/div&gt;`)[0];\n                popup_1e28739aa8a0f36a2151799e4f210e14.setContent(html_a41384b7b4990f899e6cef1b58beec22);\n            \n        \n\n        marker_fde3f6800b21204caea45acad2e9655f.bindPopup(popup_1e28739aa8a0f36a2151799e4f210e14)\n        ;\n\n        \n    \n    \n            var marker_b5f6eb0e31635652b139dec7eef6ec0f = L.marker(\n                [-23.525029, -46.690074],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_698bb5d81f2489eb738bb05c8575fbda = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_5db1cf9fe030ccdf023fc434ca144214 = $(`&lt;div id=&quot;html_5db1cf9fe030ccdf023fc434ca144214&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CORNELIA&lt;/div&gt;`)[0];\n                popup_698bb5d81f2489eb738bb05c8575fbda.setContent(html_5db1cf9fe030ccdf023fc434ca144214);\n            \n        \n\n        marker_b5f6eb0e31635652b139dec7eef6ec0f.bindPopup(popup_698bb5d81f2489eb738bb05c8575fbda)\n        ;\n\n        \n    \n    \n            var marker_b37862e868f7afbd8a41d93895f48283 = L.marker(\n                [-23.523407, -46.700541],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_7197fc52d61aef5ac21c5df850f0826b = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_76898115aeee731405b58ffb2e1b783b = $(`&lt;div id=&quot;html_76898115aeee731405b58ffb2e1b783b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;CATAO B/C&lt;/div&gt;`)[0];\n                popup_7197fc52d61aef5ac21c5df850f0826b.setContent(html_76898115aeee731405b58ffb2e1b783b);\n            \n        \n\n        marker_b37862e868f7afbd8a41d93895f48283.bindPopup(popup_7197fc52d61aef5ac21c5df850f0826b)\n        ;\n\n        \n    \n    \n            var marker_14286165e418ab2c30602100e2f1b4f7 = L.marker(\n                [-23.52517, -46.683408],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_d7f0ede7a06eb95f9a28d3bd12bbe57b = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_0f5e3b10c407e95323f471bd89ce11f9 = $(`&lt;div id=&quot;html_0f5e3b10c407e95323f471bd89ce11f9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;SESC POMPEIA B/C&lt;/div&gt;`)[0];\n                popup_d7f0ede7a06eb95f9a28d3bd12bbe57b.setContent(html_0f5e3b10c407e95323f471bd89ce11f9);\n            \n        \n\n        marker_14286165e418ab2c30602100e2f1b4f7.bindPopup(popup_d7f0ede7a06eb95f9a28d3bd12bbe57b)\n        ;\n\n        \n    \n    \n            var marker_ec648e4d655da4de6c98c7d63c7cfbe2 = L.marker(\n                [-23.540545, -46.643624],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_d5af06dda672f6fc57408f25257cc36e = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_da408d1d7bb43a03a7d15d14f546bcf0 = $(`&lt;div id=&quot;html_da408d1d7bb43a03a7d15d14f546bcf0&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;VITORIA B/C&lt;/div&gt;`)[0];\n                popup_d5af06dda672f6fc57408f25257cc36e.setContent(html_da408d1d7bb43a03a7d15d14f546bcf0);\n            \n        \n\n        marker_ec648e4d655da4de6c98c7d63c7cfbe2.bindPopup(popup_d5af06dda672f6fc57408f25257cc36e)\n        ;\n\n        \n    \n    \n            var marker_99687c629d10f1d7a9a294eea9624f48 = L.marker(\n                [-23.532847, -46.657404],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_cda28e44b87de4aabe401bef1542307b = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_2abffa2cdd7089ba836fb258fbdf26cf = $(`&lt;div id=&quot;html_2abffa2cdd7089ba836fb258fbdf26cf&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ROSA E SILVA C/B&lt;/div&gt;`)[0];\n                popup_cda28e44b87de4aabe401bef1542307b.setContent(html_2abffa2cdd7089ba836fb258fbdf26cf);\n            \n        \n\n        marker_99687c629d10f1d7a9a294eea9624f48.bindPopup(popup_cda28e44b87de4aabe401bef1542307b)\n        ;\n\n        \n    \n    \n            var marker_cb5ce5daefef7805da58715b444fece5 = L.marker(\n                [-23.538708, -46.646888],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_20a616464aad61b614193a669bd90c1c = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_0b7c03c335cd9a8a5f3095375b9ac745 = $(`&lt;div id=&quot;html_0b7c03c335cd9a8a5f3095375b9ac745&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;ANA CINTRA B/C&lt;/div&gt;`)[0];\n                popup_20a616464aad61b614193a669bd90c1c.setContent(html_0b7c03c335cd9a8a5f3095375b9ac745);\n            \n        \n\n        marker_cb5ce5daefef7805da58715b444fece5.bindPopup(popup_20a616464aad61b614193a669bd90c1c)\n        ;\n\n        \n    \n    \n            var marker_8102d4df0d4e780e8651e9da1dc596a2 = L.marker(\n                [-23.532068, -46.660957],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_911dc4209f315e8344792ac970dae976 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_a5de63c07e125b964566260146ff3050 = $(`&lt;div id=&quot;html_a5de63c07e125b964566260146ff3050&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;PACAEMBU B/C&lt;/div&gt;`)[0];\n                popup_911dc4209f315e8344792ac970dae976.setContent(html_a5de63c07e125b964566260146ff3050);\n            \n        \n\n        marker_8102d4df0d4e780e8651e9da1dc596a2.bindPopup(popup_911dc4209f315e8344792ac970dae976)\n        ;\n\n        \n    \n    \n            var marker_4ccfd7017a45dc59ab5ff233d96ba3f1 = L.marker(\n                [-23.536318, -46.651201],\n                {\n}\n            ).addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n    \n        var popup_c426e36cb119d4f9c3fe8fc332e8dd01 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_75d6c95157d58cf3687032503a01bafd = $(`&lt;div id=&quot;html_75d6c95157d58cf3687032503a01bafd&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;NOTHMANN C/B&lt;/div&gt;`)[0];\n                popup_c426e36cb119d4f9c3fe8fc332e8dd01.setContent(html_75d6c95157d58cf3687032503a01bafd);\n            \n        \n\n        marker_4ccfd7017a45dc59ab5ff233d96ba3f1.bindPopup(popup_c426e36cb119d4f9c3fe8fc332e8dd01)\n        ;\n\n        \n    \n    \n            tile_layer_59431c97ff3c88196052d1e99203c95a.addTo(map_f90e4fcf446411cf912dc95437df87c6);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n## Posição em Tempo Real dos Veículos\n\nConsultamos a posição atual dos veículos da linha.\n\n::: {#58e2109a .cell execution_count=5}\n``` {.python .cell-code}\n# Busca posição dos veículos\npos = s.get(\n    \"http://api.olhovivo.sptrans.com.br/v2.1//Posicao/Linha?codigoLinha=2506\"\n)\nposicoes = pos.json()\n\nprint(f\"Dados de posição: {posicoes}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDados de posição: {'hr': '09:55', 'vs': [{'p': '12533', 'a': True, 'ta': '2025-11-25T12:55:03Z', 'py': -23.540844, 'px': -46.6430345, 'sv': None, 'is': None}, {'p': '12615', 'a': True, 'ta': '2025-11-25T12:55:26Z', 'py': -23.520449499999998, 'px': -46.6996115, 'sv': None, 'is': None}, {'p': '12782', 'a': True, 'ta': '2025-11-25T12:55:18Z', 'py': -23.520992749999998, 'px': -46.699836, 'sv': None, 'is': None}, {'p': '12521', 'a': True, 'ta': '2025-11-25T12:54:51Z', 'py': -23.543589249999997, 'px': -46.644211999999996, 'sv': None, 'is': None}]}\n```\n:::\n:::\n\n\n## Conclusão\n\nEste documento demonstra como utilizar a API Olho Vivo da SPTrans para obter informações sobre transporte público em São Paulo, incluindo linhas, paradas e posicionamento em tempo real dos veículos.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}